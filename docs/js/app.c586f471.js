(function(t){function e(e){for(var s,i,c=e[0],o=e[1],l=e[2],d=0,p=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,l||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,c=1;c<a.length;c++){var o=a[c];0!==r[o]&&(s=!1)}s&&(n.splice(e--,1),t=i(i.s=a[0]))}return t}var s={},r={app:0},n=[];function i(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,i),a.l=!0,a.exports}i.m=t,i.c=s,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-card",{staticClass:"d-flex mx-auto my-auto rounded",attrs:{elevation:"16",height:"80vh",width:"1080px",dark:""}},[a("v-card",{staticClass:"pt-1 text-center rounded",attrs:{color:"black lighten-3","min-width":"60"}},[a("v-icon",{attrs:{small:"",color:"red"}},[t._v("mdi-circle")]),a("v-icon",{attrs:{small:"",color:"orange"}},[t._v("mdi-circle")]),a("v-icon",{attrs:{small:"",color:"green accent-2"}},[t._v("mdi-circle")]),a("router-link",{attrs:{to:"/"}},[a("v-icon",{staticClass:"d-block pt-6",attrs:{color:"grey",large:""}},[t._v("mdi-account")])],1),a("router-link",{attrs:{to:"/message-list"}},[a("v-icon",{staticClass:"d-block py-6",attrs:{color:"grey",large:""}},[t._v("mdi-chat-processing-outline")])],1)],1),a("v-main",[a("v-card",{attrs:{width:"100%"}},[a("router-view")],1)],1)],1)],1)},n=[],i={name:"App",created:function(){this.$store.dispatch("fetchUsers")}},c=i,o=a("2877"),l=a("6544"),u=a.n(l),d=a("7496"),p=a("b0af"),m=a("132d"),v=a("f6c4"),f=Object(o["a"])(c,r,n,!1,null,null,null),h=f.exports;u()(f,{VApp:d["a"],VCard:p["a"],VIcon:m["a"],VMain:v["a"]});var g=a("8c4f"),y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"userList"},[a("v-app-bar",[a("h1",[t._v("User List")])]),a("v-list",{staticClass:"overflow-y-auto py-6 d-flex flex-wrap",attrs:{"max-height":"70vh",width:"1020px"}},t._l(t.listupUser,(function(e){return a("v-card",{key:e.name,staticClass:"py-6 ml-4 mb-4 text-center",attrs:{height:"320",width:"220",elevatrion:"16"}},[a("v-avatar",{attrs:{size:"120"}},[a("img",{attrs:{src:e.picture.large,alt:e.name}})]),a("v-card-title",{staticClass:"d-block text-center pb-1"},[t._v(t._s(e.name))]),a("v-card-text",[a("v-icon",{attrs:{small:""}},[t._v("mdi-map-marker")]),t._v(" "+t._s(e.country)+" / Age: "+t._s(e.age))],1),a("div",{staticClass:"text-center"},[a("v-dialog",{attrs:{width:"360"},scopedSlots:t._u([{key:"activator",fn:function(s){var r=s.on,n=s.attrs;return[a("v-btn",t._g(t._b({staticClass:"mr-4",attrs:{color:"primary lighten-2",dark:""}},"v-btn",n,!1),r),[t._v(" Profile ")]),a("router-link",{staticClass:"text-decoration-none",attrs:{to:"/user/"+e.id+"/chat"}},[a("v-btn",{attrs:{color:"grey lighten-2",dark:""},on:{click:function(a){return t.createChatLog(e.id)}}},[a("v-icon",{attrs:{color:"grey darken-3"}},[t._v("mdi-chat-processing-outline")])],1)],1)]}}],null,!0)},[a("v-card",[a("userDetail",{attrs:{user:e},on:{click:t.createChatLog}})],1)],1)],1)],1)})),1)],1)},b=[],_=(a("d3b7"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{key:t.user.name,staticClass:"px-2 py-6 text-center",attrs:{height:"540",width:"360",elevatrion:"16",dark:""}},[a("v-avatar",{attrs:{size:"120"}},[a("img",{attrs:{src:t.user.picture.large,alt:t.user.name}})]),a("v-card-title",{staticClass:"d-block text-center"},[t._v(t._s(t.user.name))]),a("v-card-subtitle",{staticClass:"d-block text-center pb-1"},[t._v(t._s(t.user.email))]),a("v-card-actions",{staticClass:"py-4"},[a("router-link",{staticClass:"text-decoration-none mx-auto",attrs:{to:"/user/"+t.user.id+"/chat"}},[a("v-btn",{attrs:{color:"grey"},on:{click:function(e){return t.$emit("click",t.user.id)}}},[t._v(" message ")])],1)],1),a("v-spacer"),a("v-simple-table",{attrs:{dark:""},scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",{staticClass:"px-10"},[a("tr",[a("td",[t._v("Gender")]),a("td",[t._v(t._s(t.user.gender))])]),a("tr",[a("td",[t._v("Age")]),a("td",[t._v(t._s(t.user.age))])]),a("tr",[a("td",[t._v("Country")]),a("td",[t._v(t._s(t.user.country))])]),a("tr",[a("td",[t._v("State")]),a("td",[t._v(t._s(t.user.state))])]),a("tr",[a("td",[t._v("City")]),a("td",[t._v(t._s(t.user.city))])])])]},proxy:!0}])})],1)}),x=[],C={name:"userDetail",props:{user:{type:Object,required:!0}}},k=C,w=a("8212"),j=a("8336"),V=a("99d9"),O=a("1f4f"),S=a("2fa4"),I=Object(o["a"])(k,_,x,!1,null,null,null),L=I.exports;u()(I,{VAvatar:w["a"],VBtn:j["a"],VCard:p["a"],VCardActions:V["a"],VCardSubtitle:V["b"],VCardTitle:V["d"],VSimpleTable:O["a"],VSpacer:S["a"]});var M={components:{userDetail:L},computed:{listupUser:function(){return this.$store.state.users.users}},methods:{createChatLog:function(t){var e=this.$store.state.messages.messages.some((function(e){return e.id===t}));e||this.$store.commit("setChatLog",t)}}},T=M,B=a("40dc"),$=a("169a"),U=a("8860"),D=Object(o["a"])(T,y,b,!1,null,null,null),A=D.exports;u()(D,{VAppBar:B["a"],VAvatar:w["a"],VBtn:j["a"],VCard:p["a"],VCardText:V["c"],VCardTitle:V["d"],VDialog:$["a"],VIcon:m["a"],VList:U["a"]});var P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"messageList"},[a("v-card",{staticClass:"userList border",attrs:{elevation:"0"}},[a("v-app-bar",[a("h1",[t._v("Message List")])]),a("v-list",{staticClass:"overflow-y-auto px-6",attrs:{"max-height":"70vh",height:"70vh"}},[a("v-simple-table",{scopedSlots:t._u([{key:"default",fn:function(){return[a("tbody",{staticClass:"text-center w-100"},t._l(t.getChatedList,(function(e){return a("tr",{key:e.name,staticClass:"py-10",attrs:{height:"72px"},on:{click:function(a){return t.transitionToChatPage(e.id)}}},[a("td",{staticClass:"text-center",attrs:{width:"8%"}},[a("v-avatar",[a("img",{attrs:{src:e.picture.large,alt:e.name}})])],1),a("td",{attrs:{width:"8%"}},[t._v(t._s(e.name))]),a("td",{attrs:{width:"16%"}},[t._v(t._s(e.timeStamp))]),a("td",{staticClass:"text-start",attrs:{width:"68%"}},[t._v(t._s(e.text))])])})),0)]},proxy:!0}])})],1)],1)],1)},E=[],F=a("b85c"),J=a("5530"),q=(a("4e82"),a("b0c0"),a("2f62")),R={computed:Object(J["a"])(Object(J["a"])({},Object(q["b"])(["getUserById","getChatedUserId","getLastMessageById"])),{},{getChatedList:function(){var t,e=[],a=this.getChatedUserId,s=Object(F["a"])(a);try{for(s.s();!(t=s.n()).done;){var r=t.value,n=this.getUserById(r),i=this.getLastMessageById(r);console.log(i),void 0!==i&&e.push({id:r,name:n.name,picture:n.picture,timeStamp:i.timeStamp,text:i.text})}}catch(c){s.e(c)}finally{s.f()}return e.sort((function(t,e){return new Date(e.timeStamp)-new Date(t.timeStamp)})),e}}),methods:{transitionToChatPage:function(t){return this.$router.push("/user/"+t+"/chat/")}}},z=R,H=Object(o["a"])(z,P,E,!1,null,null,null),X=H.exports;u()(H,{VAppBar:B["a"],VAvatar:w["a"],VCard:p["a"],VList:U["a"],VSimpleTable:O["a"]});var Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",{staticClass:"chat d-flex justify-space-between flex-column",attrs:{height:"78vh"}},[a("chat-display",{ref:"chatDisplay",staticClass:"px-4",attrs:{user:t.getUserById(t.$route.params.id),messages:t.getMessageById(t.$route.params.id)}}),a("v-footer",{attrs:{padless:""}},[a("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[a("v-text-field",{attrs:{autofocus:"",clearable:"",height:"16",placeholder:"Send Message..."},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.inputMessage(e,t.$route.params.id)}},model:{value:t.inputText,callback:function(e){t.inputText=e},expression:"inputText"}})],1)],1)],1)},G=[],Y=(a("fb6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("h1",[t._v(t._s(t.user.name))]),a("v-divider",{staticClass:"py-4"}),t.messages?a("v-card",{staticClass:"overflow-y-auto",attrs:{flat:"","max-height":"55vh"}},t._l(t.messages,(function(e){return a("v-col",{key:e.id,staticClass:"py-0",attrs:{cols:"12"}},[a("v-card",{staticClass:"d-flex align-center mb-2",class:{"justify-end":e.me},attrs:{flat:""}},[e.me?t._e():a("v-avatar",{staticClass:"mr-4"},[a("img",{attrs:{src:t.user.picture.large,alt:t.user.name}})]),a("v-card",{attrs:{"max-width":"30vw"}},[a("p",{staticClass:"my-0 pl-4 text-start grey--text"},[t._v(t._s(e.timeStamp.split(" ")[1]))]),a("p",{staticClass:"rounded-xl px-4 py-2 my-0",class:{grey:!e.me,green:e.me,"black--text":e.me}},[t._v(t._s(e.text))])])],1)],1)})),1):t._e()],1)}),K=[],N={props:{user:{type:Object,required:!0},messages:{type:Array}}},Q=N,W=a("62ad"),tt=a("ce7e"),et=Object(o["a"])(Q,Y,K,!1,null,null,null),at=et.exports;u()(et,{VAvatar:w["a"],VCard:p["a"],VCol:W["a"],VDivider:tt["a"]});var st={data:function(){return{inputText:""}},components:{chatDisplay:at},computed:Object(J["a"])({},Object(q["b"])(["getUserById","getMessageById","getChatedUserId"])),methods:{inputMessage:function(t,e){if(this.inputText.length>0&&13===t.keyCode){var a=new Date,s=a.getFullYear(),r=("0"+a.getMonth()).slice(-2),n=("0"+a.getDay()).slice(-2),i=("0"+a.getHours()).slice(-2),c=("0"+a.getMinutes()).slice(-2),o=("0"+a.getSeconds()).slice(-2),l=s+"-"+r+"-"+n+" "+i+":"+c+":"+o,u={me:!0,text:this.inputText,timeStamp:l};this.$store.commit("setMessages",{userId:e,msgObj:u}),this.$store.dispatch("fetchReply",{userId:e,msgObj:u}),this.inputText="",this.scrollToBottom()}}}},rt=st,nt=a("553a"),it=a("8654"),ct=Object(o["a"])(rt,Z,G,!1,null,null,null),ot=ct.exports;u()(ct,{VCard:p["a"],VCol:W["a"],VFooter:nt["a"],VTextField:it["a"]}),s["a"].use(g["a"]);var lt=[{path:"/",name:"userList",component:A},{path:"/user/:id/chat",name:"chat",component:ot},{path:"/message-list",name:"message-list",component:X}],ut=new g["a"]({mode:"history",base:"",routes:lt}),dt=ut,pt=(a("7db0"),a("d81d"),{state:{messages:[]},actions:{fetchReply:function(t,e){var a=e.userId,s=e.msgObj,r=new FormData;r.append("apikey","DZZOfVkk6sXS1X3aHyBEJjP9ukRJucuj"),r.append("query",s.text),fetch("https://api.a3rt.recruit.co.jp/talk/v1/smalltalk",{method:"POST",body:r}).then((function(t){return t.json()})).then((function(e){var r={me:!1,text:e.results[0].reply,timeStamp:s.timeStamp};t.commit("setMessages",{userId:a,msgObj:r})}))}},mutations:{setChatLog:function(t,e){t.messages.push({id:e,chatLog:[]})},setMessages:function(t,e){var a=e.userId,s=e.msgObj;t.messages.find((function(t){return t.id===a})).chatLog.push(s)}},getters:{getMessageById:function(t){return function(e){var a=t.messages.find((function(t){return t.id===e})).chatLog;return a}},getLastMessageById:function(t,e){return function(t){return e.getMessageById(t).slice(-1)[0]}},getChatedUserId:function(t){return t.messages.map((function(t){return t.id}))}}}),mt={state:{users:[]},actions:{fetchUsers:function(t){fetch("https://randomuser.me/api/?results=100").then((function(t){return t.json()})).then((function(e){var a,s=[],r=Object(F["a"])(e.results);try{for(r.s();!(a=r.n()).done;){var n=a.value;s.push({id:n.login.uuid,name:n.name.first+n.name.last,gender:n.gender,age:n.dob.age,country:n.location.country,state:n.location.state,city:n.location.city,email:n.email,picture:n.picture})}}catch(i){r.e(i)}finally{r.f()}t.commit("setUsers",s)}))}},mutations:{setUsers:function(t,e){t.users=e}},getters:{getUserById:function(t){return function(e){return t.users.find((function(t){return t.id===e}))}}}};s["a"].use(q["a"]);var vt=new q["a"].Store({modules:{users:mt,messages:pt}}),ft=vt,ht=a("f309");s["a"].use(ht["a"]);var gt=new ht["a"]({});s["a"].config.productionTip=!1,new s["a"]({router:dt,store:ft,vuetify:gt,render:function(t){return t(h)}}).$mount("#app")}});
//# sourceMappingURL=app.c586f471.js.map